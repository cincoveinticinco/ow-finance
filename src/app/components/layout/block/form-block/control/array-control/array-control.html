<div [formGroup]="form">
    @for (c of control.groups; track i; let i = $index) {
        @if(!isNull(c.id)) {
            <div [formArrayName]="c.id">
                <div class="flex align-items-center mb-3">
                    <div class="mr-2 flex gap-2 align-items-center">
                        @if (control.add_config?.can_remove_first || i > 0) {
                            <i class="pi pi-trash invalid cursor-pointer" (click)="deleteControl(c.id)"></i>
                        }
                        @if (control.add_config?.show_index) {
                            <p class="font-semibold text-xl">{{ i + 1 }}</p>
                        }
                    </div>
                    <div class="w-full border-left-1 pl-2">
                        <app-form-control [control]="c"></app-form-control>
                        <!-- <app-control-block [control]="control"></app-control-block> -->
                    </div>
                </div>
            </div>
        }
    }
    @if (control.add_config?.show_add) {
        <div class="col-12 md:col-2 lg:col-2 mt-4">
            <p-button [disabled]="control.groups.length === control.add_config?.limit" [label]="control.add_config?.add_text" (click)="addControl()" />
        </div>
    }
</div>